## js异步的实现

1. 所有同步的任务都在js主线程上执行，形成一个执行栈
2. 还有一个任务队列Event loop，异步任务在event table中注册函数；当满足触发条件时，回调函数被推入任务队列
3. 一旦执行栈中所有同步任务都被执行完毕后，系统就会读取任务队列，看看里面有哪些事件.那些对应的异步任务, 于是结束等待状态, 进入执行栈, 开始执行
4. 主线程不断重复上面第三步


## 宏任务与微任务

1. 执行一个宏任务，如果过程遇到微任务，就将其放置到微任务的“事件队列”中
2. 当前宏任务执行完成后，会查看微任务的“事件队列”，并将里面全部的微任务依次执行完
3. 重复以上两步操作

### 宏任务（macro-task）

包括：

- script整体代码 
- setTimeout 
- setInterval 
- setImmediate 
- I/O
- UI rendering

### 微任务（micro-task）